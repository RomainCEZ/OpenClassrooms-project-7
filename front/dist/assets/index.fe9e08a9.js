var A=Object.defineProperty,D=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var z=(r,t,o)=>t in r?A(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,L=(r,t)=>{for(var o in t||(t={}))$.call(t,o)&&z(r,o,t[o]);if(R)for(var o of R(t))T.call(t,o)&&z(r,o,t[o]);return r},m=(r,t)=>D(r,O(t));import{j as E,r as l,u as V,Z as j,L as S,a as w,b as Z,c as U,R as J,d as C,e as H,f as K,B as W}from"./vendor.fececad9.js";const G=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}};G();const e=E.exports.jsx,p=E.exports.jsxs,k=E.exports.Fragment;function X(){return p("div",{className:"flex h-14",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-205 207 100 100",children:e("g",{fill:"#FFFFFF",children:e("path",{d:"M-155 298.8c11.2 0 21.7-4.3 29.6-12.2 7.9-7.9 12.2-18.4 12.2-29.6 0-11.2-4.3-21.7-12.2-29.6-7.9-7.9-18.4-12.2-29.6-12.2s-21.7 4.3-29.6 12.2c-7.9 7.9-12.2 18.4-12.2 29.6 0 11.2 4.3 21.7 12.2 29.6 7.9 7.9 18.4 12.2 29.6 12.2zm2.4-7.1c-.8.1-1.6.1-2.4.1-1.1 0-2.2-.1-3.3-.2-3.6-5.6-6.3-11.6-7.9-17.9h17.7c.6 1.5 1.7 2.9 3 3.8-1.7 5-4.1 9.7-7.1 14.2zm9.5-2c1.9-3.5 3.4-7 4.6-10.7 2.9-.6 5.2-2.6 6.3-5.3h7.7c-4 7.3-10.7 13-18.6 16zm22.8-32.7c0 3.3-.5 6.5-1.3 9.6h-10.8c-.6-1.3-1.6-2.5-2.8-3.4.2-2.2.3-4.4.3-6.6 0-3.1-.2-6.2-.6-9.2h13.8c1 3 1.4 6.3 1.4 9.6zm-4.2-16.7h-12.2c-1.3-5.5-3.2-10.7-5.8-15.7 7.6 2.9 14 8.6 18 15.7zm-17.4 16.3c0 1.7-.1 3.4-.2 5.1-2.8.6-5.1 2.4-6.2 4.9h-19.3c-.4-3-.7-6.1-.7-9.1 0-1.9.1-3.8.3-5.7 2.6-.5 4.7-2.2 6-4.4h19.5c.4 3 .6 6.1.6 9.2zm-15.7-34.2c.9-.1 1.8-.1 2.6-.1 1 0 2 0 3 .1 3.6 5.6 6.3 11.6 7.9 17.9h-17.4c-.6-1.7-1.7-3.2-3.1-4.3 1.8-4.8 4.1-9.3 7-13.6zm-9.5 2c-1.7 3.2-3.2 6.6-4.4 10-3.1.6-5.6 2.9-6.6 5.8h-7.3c3.9-7.1 10.4-12.8 18.3-15.8zm-22.6 32.6c0-3.3.5-6.6 1.4-9.6h10.9c.6 1.1 1.5 2.1 2.5 2.9-.2 2.4-.4 4.8-.4 7.2 0 3.1.2 6.1.6 9.1h-13.6c-1-3.1-1.4-6.3-1.4-9.6zm16.2 16.6c1.3 5.4 3.2 10.7 5.8 15.7-7.6-3-13.9-8.6-17.8-15.7h12z"})})}),e("svg",{className:"hidden sm:inline",xmlns:"http://www.w3.org/2000/svg",viewBox:"80 0 420 70",children:e("g",{fill:"white",transform:"matrix(4.569687698175228,0,0,4.569687698175228,96.32992012448554,-2.2310693714669583)",children:e("path",{d:"M5.41 12.67L5.41 12.67Q3.23 12.67 1.76 11.20L1.76 11.20L1.76 11.20Q0.29 9.73 0.29 7.53L0.29 7.53L0.29 7.53Q0.29 5.37 1.76 3.89L1.76 3.89L1.76 3.89Q3.23 2.42 5.41 2.42L5.41 2.42L5.41 2.42Q7.60 2.42 9.17 3.79L9.17 3.79L7.81 5.28L7.81 5.28Q6.76 4.46 5.41 4.46L5.41 4.46L5.41 4.46Q4.03 4.47 3.18 5.33L3.18 5.33L3.18 5.33Q2.34 6.18 2.34 7.51L2.34 7.51L2.34 7.51Q2.34 8.94 3.19 9.78L3.19 9.78L3.19 9.78Q4.04 10.62 5.42 10.62L5.42 10.62L5.42 10.62Q6.53 10.62 7.12 10.19L7.12 10.19L7.12 8.43L5.76 8.44L5.76 6.52L9.17 6.52L9.17 11.31L9.17 11.31Q7.61 12.67 5.41 12.67L5.41 12.67ZM12.84 5.83L12.84 6.59L12.84 6.59Q13.58 5.84 14.63 5.84L14.63 5.84L14.63 5.84Q14.96 5.84 15.26 5.89L15.26 5.89L14.96 7.78L14.96 7.78Q14.63 7.48 14.01 7.46L14.01 7.46L14.01 7.46Q13.31 7.51 12.84 8.47L12.84 8.47L12.84 12.67L10.93 12.67L10.93 6.04L12.84 5.83ZM19.61 12.74L19.61 12.74Q18.12 12.74 17.12 11.74L17.12 11.74L17.12 11.74Q16.13 10.74 16.13 9.26L16.13 9.26L16.13 9.26Q16.13 7.77 17.12 6.77L17.12 6.77L17.12 6.77Q18.12 5.77 19.61 5.77L19.61 5.77L19.61 5.77Q21.10 5.77 22.10 6.77L22.10 6.77L22.10 6.77Q23.10 7.77 23.10 9.26L23.10 9.26L23.10 9.26Q23.10 10.75 22.10 11.74L22.10 11.74L22.10 11.74Q21.10 12.74 19.61 12.74L19.61 12.74ZM19.61 11.09L19.61 11.09L19.61 11.09Q20.38 11.09 20.87 10.56L20.87 10.56L20.87 10.56Q21.36 10.04 21.36 9.26L21.36 9.26L21.36 9.26Q21.36 8.48 20.87 7.96L20.87 7.96L20.87 7.96Q20.38 7.43 19.60 7.43L19.60 7.43L19.60 7.43Q18.83 7.43 18.34 7.96L18.34 7.96L18.34 7.96Q17.86 8.48 17.86 9.26L17.86 9.26L17.86 9.26Q17.86 10.04 18.34 10.56L18.34 10.56L18.34 10.56Q18.83 11.09 19.61 11.09ZM28.52 10.25L28.52 10.25L28.52 5.83L30.43 5.83L30.43 12.67L28.52 12.67L28.52 12.05L28.52 12.05Q27.83 12.67 26.88 12.67L26.88 12.67L26.88 12.67Q25.58 12.67 24.90 11.88L24.90 11.88L24.90 11.88Q24.21 11.09 24.21 10.07L24.21 10.07L24.21 5.83L26.13 5.83L26.13 9.59L26.13 9.59Q26.13 10.27 26.47 10.65L26.47 10.65L26.47 10.65Q26.81 11.03 27.50 11.05L27.50 11.05L27.50 11.05Q28.10 11.01 28.52 10.25ZM33.97 15.55L32.06 15.54L32.06 6.04L33.97 5.83L33.97 6.38L33.97 6.38Q34.74 5.83 35.48 5.83L35.48 5.83L35.48 5.83Q37.05 5.83 37.97 6.86L37.97 6.86L37.97 6.86Q38.90 7.88 38.90 9.25L38.90 9.25L38.90 9.25Q38.90 10.62 37.97 11.64L37.97 11.64L37.97 11.64Q37.05 12.67 35.48 12.67L35.48 12.67L35.48 12.67Q34.45 12.60 33.97 12.11L33.97 12.11L33.97 15.55ZM33.97 8.63L33.97 8.63L33.97 9.74L33.97 9.74Q34.11 10.89 35.41 11.09L35.41 11.09L35.41 11.09Q37.05 10.96 37.26 9.39L37.26 9.39L37.26 9.39Q37.19 7.47 35.41 7.40L35.41 7.40L35.41 7.40Q34.11 7.61 33.97 8.63ZM43.35 12.74L43.35 12.74Q41.86 12.74 40.87 11.74L40.87 11.74L40.87 11.74Q39.87 10.74 39.87 9.26L39.87 9.26L39.87 9.26Q39.87 7.77 40.87 6.77L40.87 6.77L40.87 6.77Q41.86 5.77 43.35 5.77L43.35 5.77L43.35 5.77Q44.84 5.77 45.84 6.77L45.84 6.77L45.84 6.77Q46.84 7.77 46.84 9.26L46.84 9.26L46.84 9.26Q46.84 10.75 45.84 11.74L45.84 11.74L45.84 11.74Q44.84 12.74 43.35 12.74L43.35 12.74ZM43.35 11.09L43.35 11.09L43.35 11.09Q44.13 11.09 44.61 10.56L44.61 10.56L44.61 10.56Q45.10 10.04 45.10 9.26L45.10 9.26L45.10 9.26Q45.10 8.48 44.61 7.96L44.61 7.96L44.61 7.96Q44.13 7.43 43.34 7.43L43.34 7.43L43.34 7.43Q42.57 7.43 42.08 7.96L42.08 7.96L42.08 7.96Q41.60 8.48 41.60 9.26L41.60 9.26L41.60 9.26Q41.60 10.04 42.08 10.56L42.08 10.56L42.08 10.56Q42.57 11.09 43.35 11.09ZM50.03 8.30L50.03 8.30L50.03 12.67L48.11 12.67L48.11 6.04L50.03 5.83L50.03 6.44L50.03 6.44Q50.67 5.84 51.67 5.84L51.67 5.84L51.67 5.84Q52.96 5.84 53.65 6.62L53.65 6.62L53.65 6.62Q54.40 5.84 55.90 5.84L55.90 5.84L55.90 5.84Q57.20 5.84 57.89 6.62L57.89 6.62L57.89 6.62Q58.57 7.41 58.57 8.44L58.57 8.44L58.57 12.67L56.66 12.67L56.66 8.91L56.66 8.91Q56.66 8.23 56.35 7.85L56.35 7.85L56.35 7.85Q56.04 7.48 55.35 7.46L55.35 7.46L55.35 7.46Q54.78 7.50 54.37 8.21L54.37 8.21L54.37 8.21Q54.33 8.42 54.33 8.64L54.33 8.64L54.33 12.67L52.42 12.67L52.42 8.91L52.42 8.91Q52.42 8.23 52.11 7.85L52.11 7.85L52.11 7.85Q51.80 7.48 51.11 7.46L51.11 7.46L51.11 7.46Q50.48 7.50 50.03 8.30ZM61.14 7.82L60.39 6.66L60.39 6.66Q61.69 5.84 63.40 5.84L63.40 5.84L63.40 5.84Q64.63 5.84 65.34 6.52L65.34 6.52L65.34 6.52Q66.06 7.21 66.06 8.57L66.06 8.57L66.06 12.67L64.15 12.67L64.15 12.13L64.15 12.13Q63.31 12.67 62.64 12.67L62.64 12.67L62.64 12.67Q61.28 12.67 60.59 12.09L60.59 12.09L60.59 12.09Q59.91 11.51 59.91 10.49L59.91 10.49L59.91 10.49Q59.91 9.53 60.56 8.78L60.56 8.78L60.56 8.78Q61.20 8.03 62.64 8.03L62.64 8.03L62.64 8.03Q63.31 8.03 64.15 8.44L64.15 8.44L64.15 8.23L64.15 8.23Q64.13 7.48 63.05 7.41L63.05 7.41L63.05 7.41Q61.82 7.41 61.14 7.82L61.14 7.82ZM64.15 10.62L64.15 10.62L64.15 9.85L64.15 9.85Q63.88 9.32 62.85 9.32L62.85 9.32L62.85 9.32Q61.62 9.46 61.55 10.28L61.55 10.28L61.55 10.28Q61.62 11.09 62.85 11.16L62.85 11.16L62.85 11.16Q63.88 11.16 64.15 10.62ZM69.69 8.33L69.69 8.33L69.69 12.67L67.77 12.67L67.77 6.04L69.69 5.83L69.69 6.45L69.69 6.45Q70.38 5.84 71.33 5.84L71.33 5.84L71.33 5.84Q72.63 5.84 73.31 6.62L73.31 6.62L73.31 6.62Q73.99 7.41 73.99 8.44L73.99 8.44L73.99 12.67L72.08 12.67L72.08 8.91L72.08 8.91Q72.08 8.23 71.74 7.85L71.74 7.85L71.74 7.85Q71.39 7.48 70.70 7.46L70.70 7.46L70.70 7.46Q70.11 7.50 69.69 8.33ZM77.51 12.67L75.60 12.67L75.60 5.83L77.51 5.83L77.51 12.67ZM75.53 4.20L75.53 4.20L75.53 4.20Q75.53 4.61 75.80 4.88L75.80 4.88L75.80 4.88Q76.08 5.15 76.56 5.15L76.56 5.15L76.56 5.15Q77.03 5.15 77.31 4.88L77.31 4.88L77.31 4.88Q77.58 4.61 77.58 4.20L77.58 4.20L77.58 4.20Q77.58 3.79 77.31 3.51L77.31 3.51L77.31 3.51Q77.03 3.23 76.54 3.23L76.54 3.23L76.54 3.23Q76.08 3.23 75.80 3.51L75.80 3.51L75.80 3.51Q75.53 3.79 75.53 4.20ZM80.06 7.82L79.31 6.66L79.31 6.66Q80.61 5.84 82.32 5.84L82.32 5.84L82.32 5.84Q83.55 5.84 84.27 6.52L84.27 6.52L84.27 6.52Q84.98 7.21 84.98 8.57L84.98 8.57L84.98 12.67L83.07 12.67L83.07 12.13L83.07 12.13Q82.24 12.67 81.57 12.67L81.57 12.67L81.57 12.67Q80.20 12.67 79.52 12.09L79.52 12.09L79.52 12.09Q78.83 11.51 78.83 10.49L78.83 10.49L78.83 10.49Q78.83 9.53 79.48 8.78L79.48 8.78L79.48 8.78Q80.12 8.03 81.57 8.03L81.57 8.03L81.57 8.03Q82.23 8.03 83.07 8.44L83.07 8.44L83.07 8.23L83.07 8.23Q83.06 7.48 81.98 7.41L81.98 7.41L81.98 7.41Q80.75 7.41 80.06 7.82L80.06 7.82ZM83.07 10.62L83.07 10.62L83.07 9.85L83.07 9.85Q82.80 9.32 81.77 9.32L81.77 9.32L81.77 9.32Q80.54 9.46 80.47 10.28L80.47 10.28L80.47 10.28Q80.54 11.09 81.77 11.16L81.77 11.16L81.77 11.16Q82.80 11.16 83.07 10.62Z"})})})]})}const I=l.exports.createContext({loggedIn:!1,setLoggedIn:null,user:{username:null,token:null},createSession:null,logout:null}),Y=({children:r})=>{const[t,o,i]=V("session",{username:null,token:null}),[a,s]=l.exports.useState(!1),[f,x]=l.exports.useState(t);function y(b){o(b),x(b)}l.exports.useEffect(()=>{t.username!==null&&t.token!==null?s(!0):s(!1)},[]);function Q(){i(),s(!1)}return e(I.Provider,{value:{loggedIn:a,setLoggedIn:s,user:f,createSession:y,logout:Q},children:r})};function F({handleClick:r,path:t,children:o}){return e(j.Item,{children:({active:i})=>e(S,{to:t,className:`
                        flex justify-center items-center p-4
                        ${i?"bg-blue-600":""}
                    `,onClick:()=>r(),children:o})})}function _({username:r}){const{logout:t}=l.exports.useContext(I);return p(j,{as:"nav",className:"relative",children:[e(j.Button,{className:"px-6 py-2.5 bg-blue-700 text-white text-md rounded shadow-md\r hover:bg-blue-600 hover:shadow-lg\r focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0\r active:bg-blue-600 active:shadow-lg\r transition duration-150 ease-in-out\r ",children:`Bienvenue, ${r} !`}),p(j.Items,{className:"w-full absolute bg-blue-700 py-2 rounded-lg shadow-lg mt-1",children:[e(F,{path:"./",children:"Accueil"}),e(F,{path:"./login",handleClick:()=>t(),children:"D\xE9connexion"})]})]})}function ee(){const{loggedIn:r,user:t}=l.exports.useContext(I);return p("header",{className:"flex items-center justify-between bg-blue-900 p-5",children:[e(X,{}),e("nav",{className:"right-6 text-white",children:r?e(_,{username:t.username}):e(S,{to:"./login",className:"px-6 py-3.5 bg-blue-700 text-white text-md rounded shadow-md\r hover:bg-blue-600 hover:shadow-lg\r focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0\r transition duration-150 ease-in-out",children:"Se connecter"})})]})}function te({children:r}){return e("main",{className:"flex justify-between bg-gray-100 sm:px-10 gap-x-10 min-h-screen",children:r})}class re{constructor(){const t="https://nestjs-backend-groupomania.herokuapp.com";w.defaults.baseURL=`${t}/api`}async getAllPosts(){return(await w.get("/posts")).data}async createPost(t){await w.post("/posts",t)}async login(t){const o=await w.post("/users/login",t);return console.log(o.data),o.data}async signup(t){await w.post("/users/signup",t)}async getPostById(t){return(await w.get(`/posts/${t}`)).data}async editPost(t,o){await w.patch(`/posts/${t}`,o)}async deletePost(t){await w.delete(`/posts/${t}`)}}const v=new re;function oe(){const[r,t]=l.exports.useState({email:"",password:""}),{loggedIn:o,setLoggedIn:i,createSession:a}=l.exports.useContext(I),{register:s,watch:f,handleSubmit:x,formState:{errors:y}}=Z({reValidateMode:"onBlur",defaultValues:{email:"",password:""}}),Q=U();function b(u){const g=u.target.value;t(c=>m(L({},c),{email:g}))}function N(u){const g=u.target.value;t(c=>m(L({},c),{password:g}))}async function d(u){if(u.preventDefault(),r.email&&r.password){const g={email:r.email,password:r.password},c=await v.login(g);await i(!0),await a(c),Q("/")}else console.log("erreur")}return e("section",{className:"flex flex-col content-center justify-center rounded",children:p("form",{onSubmit:d,className:"flex flex-col p-4 gap-3 border bg-gray-200 border-blue-900 rounded",children:[e("input",m(L({},s("email")),{type:"email",placeholder:"Email",className:"p-2 border border-blue-900 rounded",onChange:u=>b(u),value:r.email,required:!0})),e("input",m(L({},s("password")),{type:"password",placeholder:"Mot de passe",className:"p-2 border border-blue-900 rounded",onChange:u=>N(u),value:r.password,required:!0})),e("button",{className:"text-white bg-blue-900 p-2 rounded hover:bg-blue-700 hover:shadow-sm hover:shadow-blue-800",children:"Se connecter"}),e(S,{to:"/signup",className:"m-3 text-blue-700 hover:text-blue-500 font-bold",children:"Pas encore enregistr\xE9 ? Cliquez ici pour cr\xE9er un compte."})]})})}function se(){const[r,t]=l.exports.useState({email:"",username:"",password:"",confirmPassword:""}),{register:o,watch:i,handleSubmit:a,formState:{errors:s}}=Z({reValidateMode:"onBlur",defaultValues:{email:"",username:"",password:"",confirmPassword:""}}),f=U();function x(d){const u=d.target.value;t(g=>m(L({},g),{email:u}))}function y(d){const u=d.target.value;t(g=>m(L({},g),{username:u}))}function Q(d){const u=d.target.value;t(g=>m(L({},g),{password:u}))}function b(d){const u=d.target.value;t(g=>m(L({},g),{confirmPassword:u}))}async function N(d){if(d.preventDefault(),r.email&&r.username&&r.password===r.confirmPassword){const u={email:r.email,username:r.username,password:r.password};await v.signup(u),f("/login")}else console.log("erreur")}return e("section",{className:"flex flex-col content-center justify-center border bg-gray-200 border-blue-900 rounded",children:p("form",{onSubmit:N,className:"flex flex-col p-4 gap-3",children:[e("input",m(L({},o("email")),{type:"email",placeholder:"Email",className:"p-2 border border-blue-900 rounded",onChange:d=>x(d),value:r.email,required:!0})),e("input",m(L({},o("username")),{placeholder:"Nom d'utilisateur",className:"p-2 border border-blue-900 rounded",onChange:d=>y(d),value:r.username,required:!0})),e("input",m(L({},o("password")),{type:"password",placeholder:"Mot de passe",className:"p-2 border border-blue-900 rounded",onChange:d=>Q(d),value:r.password,required:!0})),e("input",m(L({},o("confirmPassword")),{type:"password",placeholder:"Confirmez le mot de passe",className:"p-2 border border-blue-900 rounded",onChange:d=>b(d),value:r.confirmPassword,required:!0})),e("button",{className:"text-white bg-blue-900 p-2 rounded hover:bg-blue-700 hover:shadow-sm hover:shadow-blue-800",children:"Cr\xE9er un compte"}),e(S,{to:"/login",className:"m-3 text-blue-700 hover:text-blue-500 font-bold",children:"Vous avez d\xE9j\xE0 un compte ? Cliquez ici pour vous connecter."})]})})}function B(){return p("div",{className:"flex flex-col items-center justify-center p-4",children:[e("div",{className:"spinner-border animate-spin inline-block w-12 h-12 border-8 rounded-full text-blue-900",role:"status"}),e("span",{children:"Chargement en cours..."})]})}function M({children:r,path:t}){return e(S,{to:t,className:"flex justify-center p-2 mb-3 rounded bg-blue-900 text-white px-6 hover:bg-blue-700 hover:shadow-sm hover:shadow-blue-800 ",children:r})}function ne({id:r,title:t,body:o,src:i}){return e(S,{to:`/${r}`,className:"flex flex-col p-5 bg-white hover:bg-blue-200 w-full border border-indigo-900 rounded",children:p("article",{children:[e("h2",{className:"borderb text-lg font-semibold",children:t}),i?e("img",{src:i,className:"pt-3 cover w-full"}):e("p",{className:"mt-4",children:o})]})})}function ae(){const[r,t]=l.exports.useState([]),[o,i]=l.exports.useState(!1),a=r.map(s=>e(ne,{id:s.id,title:s.title,src:s.imageUrl,body:s.body},s.id));return l.exports.useEffect(()=>{i(!0),v.getAllPosts().then(s=>{t(s),i(!1)})},[]),p(k,{children:[e(M,{path:"newPost",children:"Nouveau post"}),o&&e(B,{}),e("section",{className:"flex flex-col gap-1 w-full",children:a})]})}function le(){const[r,t]=l.exports.useState({title:"",body:"",file:null,imageUrl:null}),[o,i]=l.exports.useState(null),[a,s]=l.exports.useState(!1),{register:f,watch:x,handleSubmit:y,formState:{errors:Q}}=Z({reValidateMode:"onBlur",defaultValues:{id:Date.now(),title:"",body:"",image:null}}),b=U();function N(c){const n=c.target.value;t(h=>m(L({},h),{title:n}))}function d(c){const n=c.target.value;t(h=>m(L({},h),{body:n}))}function u(c){const n=c.target.files[0],h=URL.createObjectURL(c.target.files[0]);i(n),t(P=>m(L({},P),{src:h}))}async function g(c){if(c.preventDefault(),r.title&&r.body){let n=new FormData;n.append("data",JSON.stringify({id:Date.now(),title:r.title,body:r.body})),n.append("file",o),await v.createPost(n),b("/")}else console.log("erreur")}return p("section",{className:"flex flex-col content-center justify-center rounded",children:[e(M,{path:"/",children:"Retour"}),p("form",{onSubmit:g,className:"flex flex-col p-4 gap-3 border bg-gray-200 border-blue-900 rounded",children:[e("input",m(L({},f("title")),{placeholder:"Titre",className:"p-2 border border-blue-900 rounded",onChange:c=>N(c),value:r.title,required:!0})),e("textarea",m(L({},f("body")),{placeholder:"Tapez votre message ici !",className:"p-2 h-40 border border-blue-900 rounded",onChange:c=>d(c),value:r.body,required:!0})),e("input",m(L({},f("image")),{type:"file",className:"",accept:"image/png, image/jpeg",onChange:c=>u(c)})),p("div",{className:"flex justify-between gap-2",children:[e("button",{className:"text-white bg-blue-900 p-2 w-3/4 rounded",children:"Publier"}),e("div",{className:"text-center flex-grow p-2 border bg-white border-blue-900 rounded cursor-pointer",onClick:()=>s(c=>!c),children:"Aper\xE7u"})]})]}),a&&p("div",{className:"mt-2 p-2 rounded min-h-80 h-fit bg-white border border-indigo-900 divide-blue-900 divide-y-2",children:[e("h2",{className:"text-xl font-semibold p-2 border-blue-900",children:r.title}),o&&e("img",{src:r.imageUrl,className:"pt-3 w-full"}),e("p",{className:"p-3",children:r.body})]})]})}function ie(){const[r,t]=l.exports.useState({title:"",body:"",imageUrl:""}),[o,i]=l.exports.useState({title:"",body:"",file:null,imageUrl:null}),[a,s]=l.exports.useState(null),[f,x]=l.exports.useState(!1),[y,Q]=l.exports.useState(!1),b=Number(document.location.pathname.split("/")[1]),N=U();l.exports.useEffect(()=>{x(!0),v.getPostById(b).then(n=>{t({title:n.title,body:n.body,imageUrl:n.imageUrl}),i({title:n.title,body:n.body,imageUrl:n.imageUrl}),x(!1)})},[]);function d(n){const h=n.target.value;i(P=>m(L({},P),{title:h}))}function u(n){const h=n.target.value;i(P=>m(L({},P),{body:h}))}function g(n){const h=n.target.files[0],P=URL.createObjectURL(n.target.files[0]);s(h),i(q=>m(L({},q),{imageUrl:P}))}async function c(n){if(n.preventDefault(),o.title&&o.body){let h=new FormData;h.append("data",JSON.stringify({title:o.title,body:o.body})),a&&h.append("file",a),await v.editPost(b,h),N(`/${b}`)}else console.log("erreur")}return p("section",{children:[e(M,{path:`/${b}`,children:"Retour"}),f&&e(B,{}),p("form",{onSubmit:c,className:"flex flex-col p-4 gap-3 border bg-gray-200 border-blue-900 rounded",children:[e("input",{name:"title",placeholder:"Titre",className:"p-2 border border-blue-900 rounded",onChange:n=>d(n),value:o.title,required:!0}),e("textarea",{name:"body",placeholder:"Tapez votre message ici !",className:"p-2 h-40 border border-blue-900 rounded",onChange:n=>u(n),value:o.body,required:!0}),o.imageUrl&&e("img",{src:o.imageUrl,className:"pt-3 w-full"}),e("input",{name:"image",type:"file",className:"",accept:"image/png, image/jpeg",onChange:n=>g(n)}),p("div",{className:"flex justify-between gap-2",children:[e("button",{className:"text-white bg-blue-900 p-2 w-3/4 rounded",children:"\xC9diter"}),e("div",{className:"text-center flex-grow p-2 border bg-white border-blue-900 rounded cursor-pointer",onClick:()=>Q(n=>!n),children:"Aper\xE7u"})]})]}),y&&p("div",{className:"mt-2 p-2 rounded min-h-80 h-fit bg-white border border-blue-900 divide-blue-900 divide-y-2",children:[e("h2",{className:"text-xl font-semibold p-2 border-blue-900",children:o.title}),o.imageUrl&&e("img",{src:o.imageUrl,className:"pt-3 w-full"}),e("p",{className:"p-3",children:o.body})]})]})}function ce(){const[r,t]=l.exports.useState({id:0,title:"",body:""}),[o,i]=l.exports.useState(!1),a=Number(document.location.pathname.split("/")[1]);return l.exports.useEffect(()=>{i(!0),v.getPostById(a).then(s=>{t(s),i(!1)})},[]),p("section",{children:[e(M,{path:"/",children:"Retour"}),o&&e(B,{}),p("div",{className:"mt-2 p-2 sm:px-5 rounded min-h-80 h-fit bg-white border border-indigo-900 divide-blue-900 divide-y-2",children:[e("h2",{className:"text-xl font-semibold p-2 sm:px-0",children:r.title}),r.imageUrl&&e("img",{src:r.imageUrl,className:"pt-3 w-full"}),e("p",{className:"p-2",children:r.body})]}),p("div",{className:"flex justify-end items-center p-2 gap-2",children:[e(M,{path:`/${a}/edit`,children:"\xC9diter"}),e(S,{to:"/",className:"flex justify-center p-2 px-6 mb-3 rounded bg-red-900 text-white",onClick:()=>v.deletePost(a),children:"Supprimer"})]})]})}function de(){return e("div",{className:"flex flex-col w-full my-10 sm:max-w-xl mx-auto",children:p(J,{children:[e(C,{path:"/signup",element:e(se,{})}),e(C,{path:"/login",element:e(oe,{})}),e(C,{path:"/",element:e(ae,{})}),e(C,{path:"/:id",element:e(ce,{})}),e(C,{path:"newpost",element:e(le,{})}),e(C,{path:"/:id/edit",element:e(ie,{})})]})})}function ue(){return e(te,{children:e(de,{})})}const Le=l.exports.createContext({posts:null,setPosts:null}),me=({children:r})=>{const[t,o]=l.exports.useState([]);return e(Le.Provider,{value:{posts:t,setPosts:o},children:r})};function pe(){return e(k,{children:p(Y,{children:[e(ee,{}),e(me,{children:e(ue,{})})]})})}H.render(e(K.StrictMode,{children:e(W,{children:e(pe,{})})}),document.getElementById("root"));
